!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.message=a}return e(b,a),f(b,[{key:"toString",value:function(){return"LuaError: "+this.message}}]),b}(Error);c["default"]=h,b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,a),this._variables=b}return e(a,[{key:"get",value:function(a){return this._variables[a]}},{key:"set",value:function(a,b){var c=this._variables;this._variables.hasOwnProperty(a)||!this.parent?c[a]=b:this.parent.set(a,b)}},{key:"setLocal",value:function(a,b){this._variables[a]=b}},{key:"setVarargs",value:function(a){this._varargs=a}},{key:"getVarargs",value:function(){return this._varargs||this.parent&&this.parent.getVarargs()}},{key:"add",value:function(a,b){this._variables[a]+=b}},{key:"extend",value:function(b){var c=Object.create(this._variables),d=new a(c);return d.parent=this,d}}]),a}();c["default"]=f,b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){l=a}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.registerStringLib=f;var h=a("./LuaError"),i=d(h),j=a("./lib/globals"),k=0,l=void 0,m=function(){function a(b){if(e(this,a),this.index=++k,this.numValues=[void 0],this.strValues={},this.keys=[],this.values=[],this.metatable=null,b)if("function"==typeof b)b(this);else{var c=b instanceof Array;for(var d in b)if(b.hasOwnProperty(d)){var f=b[d];null===f&&(f=void 0);var g=c?parseInt(d,10)+1:d,h="object"==typeof f&&f.constructor===Object||f instanceof Array;this.set(g,h?new a(f):f)}}else;}return g(a,[{key:"get",value:function(b){if(!(this instanceof a)){if("string"==(0,j.type)(this))return l.get(b);if("userdata"==(0,j.type)(this)&&b in this)return this[b];throw new i["default"]("attempt to index a "+(0,j.type)(this)+" value")}var c=this.rawget(b);if(void 0===c){var d=void 0,e=void 0;if((d=this.metatable)&&(e=d.get("__index")))switch(e.constructor){case a:return e.get(b);case Function:return c=e.call(void 0,this,b),c instanceof Array?c[0]:c}}return c}},{key:"rawget",value:function(a){switch(typeof a){case"string":return this.strValues[a];case"number":if(a>0&&a==a>>0)return this.numValues[a];default:var b=this.keys.indexOf(a);return b>=0?this.values[b]:void 0}}},{key:"set",value:function(b,c){if(!(this instanceof a)){if("userdata"==(0,j.type)(this))return void(this[b]=c);throw new i["default"]("attempt to index a "+(0,j.type)(this)+" value")}var d=void 0,e=void 0;if((d=this.metatable)&&(e=d.get("__newindex"))){var f=void 0;switch(typeof b){case"string":f=this.strValues[b];break;case"number":var g=b>0&&b==b>>0;if(g){f=this.numValues[b];break}default:var h=this.keys,k=h.indexOf(b);f=-1==k?void 0:this.values[k]}if(void 0===f)switch(e.constructor){case a:return e.set(b,c);case Function:return e(this,b,c)}}this.rawset(b,c)}},{key:"rawset",value:function(a,b){switch(b instanceof Array&&(b=b[0]),typeof a){case"string":this.strValues[a]=b;break;case"number":var c=a>0&&a==a>>0;if(c){this.numValues[a]=b;break}default:var d=this.keys,e=d.indexOf(a);0>e&&(e=d.length,d[e]=a),this.values[e]=b}}},{key:"insert",value:function(){var a;(a=this.numValues).push.apply(a,arguments)}},{key:"toString",value:function(){var a=void 0,b=void 0;return(a=this.metatable)&&(b=a.get("__tostring"))?b(this)[0]:"table: 0x"+this.index.toString(16)}}]),a}();c["default"]=m},{"./LuaError":1,"./lib/globals":5}],4:[function(a,b,c){(function(b){"use strict";function c(a){return a&&a.__esModule?a:{"default":a}}function d(a){return a instanceof Array?a:[a]}function e(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];if(!(a instanceof Function)){if(a instanceof n["default"]){var f=void 0,g=void 0;(f=a.metatable)&&(g=f.rawget("__call"))&&(c.unshift(a),a=g)}if(!(a instanceof Function)){var h=(0,i.type)(a);throw new p["default"]("attempt to call a "+h+" value")}}return d(a.apply(void 0,c))}function f(){var a=A.config&&A.config.env;if(a)for(var b in a)j["default"].set(b,a[b])}var g=a("./Scope"),h=c(g),i=a("./lib/globals"),j=c(i),k=a("./operators"),l=c(k),m=a("./Table"),n=c(m),o=a("./LuaError"),p=c(o),q=a("./lib/math"),r=c(q),s=a("./lib/table"),t=c(s),u=a("./lib/string"),v=c(u),w=a("./lib/os"),x=c(w),y=a("./lib/package"),z=c(y),A=b.starlight=b.starlight||{},B=j["default"];f();A.runtime={globalScope:new h["default"](j["default"].strValues),_G:B,op:l["default"],T:n["default"],LuaError:p["default"],call:e};B.set("math",r["default"]),B.set("table",t["default"]),B.set("string",v["default"]),(0,m.registerStringLib)(v["default"]),B.set("os",x["default"]),B.set("package",z["default"])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./LuaError":1,"./Scope":2,"./Table":3,"./lib/globals":5,"./lib/math":6,"./lib/os":7,"./lib/package":8,"./lib/string":9,"./lib/table":10,"./operators":11}],5:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(){var a=b.starlight.runtime._G.rawget("package");if(void 0===a)throw new F["default"]("error during require(), package lib not found.");var c=[a.rawget("preload"),a.rawget("loaded")];return f=function(){return c},c}function g(a,b){if(void 0===b)throw new F["default"]("Bad argument #2 to ipairs() iterator");var c=b+1,d=a.numValues;if(d.hasOwnProperty(c)&&void 0!==d[c])return[c,d[c]]}function h(a,b){if(!(0,I.coerceToBoolean)(a))throw b=(0,I.coerceArgToString)(b,"assert",2),new F["default"](b||"Assertion failed!");return[a,b]}function i(a){throw"string"!=typeof a&&"number"!=typeof a&&(a="(error object is not a string)"),new F["default"](a)}function j(a){if(a&&a instanceof D["default"]){var b=a.metatable;if(b){var c=void 0;return(c=b.rawget("__metatable"))?c:b}}else if("string"==typeof a)return G.metatable}function k(a){return a=(0,I.coerceArgToTable)(a,"ipairs",1),[g,a,0]}function l(a,c){a=(0,I.coerceArgToString)(a,"loadstring",1);var d=b.starlight.parser;if(!d)throw new Error("Starlight parser not found in call to loadstring(). The parser is required to execute Lua strings at runtime.");try{return d.parse(a)}catch(e){return[void 0,e.message]}}function m(a,b){a=(0,I.coerceArgToTable)(a,"next",1);var c=void 0===b,d=void 0,e=void 0,f=void 0,g=void 0;if(c||"number"==typeof b&&b>0&&b==b>>0){var h=a.numValues;if("keys"in Object){var i=Object.keys(h);if(c?f=1:(f=i.indexOf(""+b)+1)&&(c=!0),c){for(;void 0!==(d=i[f])&&void 0===(e=h[d]);)f++;if(void 0!==e)return[d>>=0,e]}}else for(g in h)if(f=g>>0,c){if(void 0!==h[f])return[f,h[f]]}else f===b&&(c=!0)}for(f in a.strValues)if(a.strValues.hasOwnProperty(f))if(c){if(void 0!==a.strValues[f])return[f,a.strValues[f]]}else f==b&&(c=!0);for(f in a.keys)if(a.keys.hasOwnProperty(f)){var j=a.keys[f];if(c){if(void 0!==a.values[f])return[j,a.values[f]]}else j===b&&(c=!0)}return[]}function n(a){return a=(0,I.coerceArgToTable)(a,"pairs",1),[m,a]}function o(a){var b=void 0;try{if("function"!=typeof a)throw new F["default"]("Attempt to call non-function");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f];b=a.apply(void 0,d)}catch(g){return[!1,g&&g.toString()]}return b=[].concat(b),[!0].concat(e(b))}function p(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=b.map(function(a){return x(a)}).join("	");I.stdout.writeln(d)}function q(a,b){return a===b}function r(a,b){return a=(0,I.coerceArgToTable)(a,"rawget",1),a.rawget(b)}function s(a,b,c){if(a=(0,I.coerceArgToTable)(a,"rawset",1),void 0===b)throw new F["default"]("table index is nil");return a.rawset(b,c),a}function t(a){a=(0,I.coerceArgToString)(a,"require",1);var b=f(),c=B(b,2),d=c[0],e=c[1],g=d.rawget(a);if(void 0===g)throw new F["default"]("module '"+a+"' not found:\n	no field package.preload['"+a+"']");var h=g(a)[0];return e.rawset(a,void 0!==h?h:!0),h}function u(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];if("#"===a)return c.length;if(a=parseInt(a,10))return c.slice(a-1);var e=y(a);throw new F["default"]("bad argument #1 to 'select' (number expected, got "+e+")")}function v(a,b){a=(0,I.coerceArgToTable)(a,"setmetatable",1),void 0!==b&&(b=(0,I.coerceArgToTable)(b,"setmetatable",2));var c=void 0;if((c=a.metatable)&&c.rawget("__metatable"))throw new F["default"]("cannot change a protected metatable");return a.metatable=b,a}function w(a){var c=arguments.length<=1||void 0===arguments[1]?10:arguments[1];if(c=(0,I.coerceArgToNumber)(c,"tonumber",2),""!==a){if(2>c||c>36)throw new F["default"]("bad argument #2 to 'tonumber' (base out of range)");if(10==c&&(a===1/0||a===-(1/0)||"number"==typeof a&&b.isNaN(a)))return a;if(10!=c&&void 0===a)throw new F["default"]("bad argument #1 to 'tonumber' (string expected, got nil)");if(a=(""+a).trim(),10===c)return(0,I.coerceToNumber)(a);a=(0,I.coerceToString)(a);var d=void 0;16===c&&(d=a.match(/^(\-)?0[xX](.+)$/))&&(a=""+(d[1]||"")+d[2]);var e=new RegExp("^["+J.substr(0,c)+"]*$","gi");if(e.test(a))return parseInt(a,c)}}function x(a){var b=void 0,c=void 0;return void 0!==a&&a instanceof D["default"]&&(b=a.metatable)&&(c=b.rawget("__tostring"))?c.call(c,a):a instanceof D["default"]?a.toString():a instanceof Function?a.hasOwnProperty("toString")?""+a:"function: [host code]":(0,I.coerceToString)(a)||"userdata"}function y(a){var b=typeof a;switch(b){case"undefined":return"nil";case"number":case"string":case"boolean":case"function":return b;case"object":return a.constructor===D["default"]?"table":a&&a instanceof Function?"function":"userdata"}}function z(a,b,c){return void 0===b&&(b=1),a=(0,I.coerceArgToTable)(a,"unpack",1),b=(0,I.coerceArgToNumber)(b,"unpack",2),c=void 0===c?(0,H.getn)(a):(0,I.coerceArgToNumber)(c,"unpack",3),a.numValues.slice(b,c+1)}function A(a,b){var c=void 0,d=void 0,e=void 0;try{"function"==typeof a?c=a():e=!0,d=!0}catch(f){c=b(void 0,!0)[0],d=!1}if(e)throw new F["default"]("Attempt to call non-function");return c&&c instanceof Array||(c=[c]),c.unshift(d),c}Object.defineProperty(c,"__esModule",{value:!0});var B=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.assert=h,c.error=i,c.getmetatable=j,c.ipairs=k,c.loadstring=l,c.next=m,c.pairs=n,c.pcall=o,c.print=p,c.rawequal=q,c.rawget=r,c.rawset=s,c._require=t,c.select=u,c.setmetatable=v,c.tonumber=w,c.tostring=x,c.type=y,c.unpack=z,c.xpcall=A;var C=a("../Table"),D=d(C),E=a("../LuaError"),F=d(E),G=a("./string"),H=(d(G),a("./table")),I=a("../utils"),J="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",K="Lua 5.1";c._VERSION=K;var L=new D["default"]({_VERSION:K,assert:h,error:i,getmetatable:j,ipairs:k,loadstring:l,next:m,pairs:n,pcall:o,print:p,rawequal:q,rawget:r,rawset:s,require:t,select:u,setmetatable:v,tonumber:w,tostring:x,type:y,unpack:z,xpcall:A});c._G=L,L.rawset("_G",L),c["default"]=L}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../LuaError":1,"../Table":3,"../utils":12,"./string":9,"./table":10}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return N=L*N%M,N/M}function f(a){return a=(0,K.coerceArgToNumber)(a,"abs",1),Math.abs(a)}function g(a){return a=(0,K.coerceArgToNumber)(a,"acos",1),Math.acos(a)}function h(a){return a=(0,K.coerceArgToNumber)(a,"asin",1),Math.asin(a)}function i(a){return a=(0,K.coerceArgToNumber)(a,"atan",1),Math.atan(a)}function j(a,b){return a=(0,K.coerceArgToNumber)(a,"atan2",1),b=(0,K.coerceArgToNumber)(b,"atan2",2),Math.atan2(a,b)}function k(a){return a=(0,K.coerceArgToNumber)(a,"ceil",1),Math.ceil(a)}function l(a){return a=(0,K.coerceArgToNumber)(a,"cos",1),Math.cos(a)}function m(a){return a=(0,K.coerceArgToNumber)(a,"cosh",1),(o(a)+o(-a))/2}function n(a){return a=(0,K.coerceArgToNumber)(a,"deg",1),180*a/Math.PI}function o(a){return a=(0,K.coerceArgToNumber)(a,"exp",1),Math.exp(a)}function p(a){return a=(0,K.coerceArgToNumber)(a,"floor",1),Math.floor(a)}function q(a,b){return a=(0,K.coerceArgToNumber)(a,"fmod",1),b=(0,K.coerceArgToNumber)(b,"fmod",2),a%b}function r(a){if(a=(0,K.coerceArgToNumber)(a,"frexp",1),0===a)return[0,0];var b=a>0?1:-1;a*=b;var c=Math.floor(Math.log(a)/Math.log(2))+1,d=a/Math.pow(2,c);return[d*b,c]}function s(a,b){return a=(0,K.coerceArgToNumber)(a,"ldexp",1),b=(0,K.coerceArgToNumber)(b,"ldexp",2),a*Math.pow(2,b)}function t(a,b){return a=(0,K.coerceArgToNumber)(a,"log",1),void 0===b?Math.log(a):(c.y=c.y=c.y=y=(0,K.coerceArgToNumber)(y,"log",2),Math.log(a)/Math.log(b))}function u(a){return a=(0,K.coerceArgToNumber)(a,"log10",1),Math.log(a)/Math.log(10)}function v(){return Math.max.apply(Math,arguments)}function w(){return Math.min.apply(Math,arguments)}function x(a){a=(0,K.coerceArgToNumber)(a,"modf",1);var b=Math.floor(a),c=a-b;return[b,c]}function z(a,b){return a=(0,K.coerceArgToNumber)(a,"pow",1),b=coercArgToNumber(b,"pow",2),Math.pow(a,b)}function A(a){return a=(0,K.coerceArgToNumber)(a,"rad",1),Math.PI/180*a}function B(a,b){if(void 0===a&&void 0===b)return e();if(a=(0,K.coerceArgToNumber)(a,"random",1),void 0===b?(b=a,a=1):b=(0,K.coerceArgToNumber)(b,"random",2),a>b)throw new shine.Error("bad argument #2 to 'random' (interval is empty)");return Math.floor(e()*(b-a+1)+a)}function C(a){a=(0,K.coerceArgToNumber)(a,"randomseed",1),N=a}function D(a){return a=(0,K.coerceArgToNumber)(a,"sin",1),Math.sin(a)}function E(a){return a=(0,K.coerceArgToNumber)(a,"sinh",1),(o(a)-o(-a))/2}function F(a){return a=(0,K.coerceArgToNumber)(a,"sqrt",1),Math.sqrt(a)}function G(a){return a=(0,K.coerceArgToNumber)(a,"tan",1),Math.tan(a)}function H(a){return a=(0,K.coerceArgToNumber)(a,"tanh",1),(o(a)-o(-a))/(o(a)+o(-a))}Object.defineProperty(c,"__esModule",{value:!0}),c.abs=f,c.acos=g,c.asin=h,c.atan=i,c.atan2=j,c.ceil=k,c.cos=l,c.cosh=m,c.deg=n,c.exp=o,c.floor=p,c.fmod=q,c.frexp=r,c.ldexp=s,c.log=t,c.log10=u,c.max=v,c.min=w,c.modf=x,c.pow=z,c.rad=A,c.random=B,c.randomseed=C,c.sin=D,c.sinh=E,c.sqrt=F,c.tan=G,c.tanh=H;var I=a("../Table"),J=d(I),K=a("../utils"),L=16807,M=2147483647,N=1,O=1/0;c.huge=O;var P=Math.PI;c.pi=P,c["default"]=new J["default"]({abs:f,acos:g,asin:h,atan:i,atan2:j,ceil:k,cos:l,cosh:m,deg:n,exp:o,floor:p,fmod:q,frexp:r,huge:O,ldexp:s,log:t,log10:u,max:v,min:w,modf:x,pi:P,pow:z,rad:A,random:B,randomseed:C,sin:D,sinh:E,sqrt:F,tan:G,tanh:H})},{"../Table":3,"../utils":12}],7:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=a.getFullYear(),c=new Date(b,0);return a.getTimezoneOffset()!==c.getTimezoneOffset()}function f(a,b,c){var d=parseInt(n["%j"](a),10),e=new Date(a.getFullYear(),0,1,12),f=(8-e["get"+(c?"UTC":"")+"Day"]()+b)%7;return("0"+(Math.floor((d-f)/7)+1)).substr(-2)}function g(a,b){void 0===a&&(a="%c");var c=void 0,d=new Date;if(b&&d.setTime(1e3*b),"!"===a.substr(0,1)&&(a=a.substr(1),c=!0),"*t"===a)return new j["default"]({year:parseInt(n["%Y"](d,c),10),month:parseInt(n["%m"](d,c),10),day:parseInt(n["%d"](d,c),10),hour:parseInt(n["%H"](d,c),10),min:parseInt(n["%M"](d,c),10),sec:parseInt(n["%S"](d,c),10),wday:parseInt(n["%w"](d,c),10)+1,yday:parseInt(n["%j"](d,c),10),isdst:e(d)});for(var f in n)n.hasOwnProperty(f)&&a.indexOf(f)>=0&&(a=a.replace(f,n[f](d,c)));return a}function h(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],c=b.process;if(!c||!c.exit)throw new Error("Exit with code: "+a);c.exit(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.date=g,c.exit=h;var i=a("../Table"),j=d(i),k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"],m=[31,28,31,30,31,30,31,31,30,31,30,31],n={"%a":function(a,b){return k[a["get"+(b?"UTC":"")+"Day"]()].substr(0,3)},"%A":function(a,b){return k[a["get"+(b?"UTC":"")+"Day"]()]},"%b":function(a,b){return l[a["get"+(b?"UTC":"")+"Month"]()].substr(0,3)},"%B":function(a,b){return l[a["get"+(b?"UTC":"")+"Month"]()]},"%c":function(a,b){return a["to"+(b?"UTC":"")+"LocaleString"]()},"%d":function(a,b){return("0"+a["get"+(b?"UTC":"")+"Date"]()).substr(-2)},"%H":function(a,b){return("0"+a["get"+(b?"UTC":"")+"Hours"]()).substr(-2)},"%I":function(a,b){return("0"+((a["get"+(b?"UTC":"")+"Hours"]()+11)%12+1)).substr(-2)},"%j":function(a,b){for(var c=a["get"+(b?"UTC":"")+"Date"](),d=a["get"+(b?"UTC":"")+"Month"](),e=0;d>e;e++)c+=m[e];return d>1&&a["get"+(b?"UTC":"")+"FullYear"]()%4===0&&(c+=1),("00"+c).substr(-3)},"%m":function(a,b){return("0"+(a["get"+(b?"UTC":"")+"Month"]()+1)).substr(-2)},"%M":function(a,b){return("0"+a["get"+(b?"UTC":"")+"Minutes"]()).substr(-2)},"%p":function(a,b){return a["get"+(b?"UTC":"")+"Hours"]()<12?"AM":"PM"},"%S":function(a,b){return("0"+a["get"+(b?"UTC":"")+"Seconds"]()).substr(-2)},"%U":function(a,b){return f(a,0,b)},"%w":function(a,b){return""+a["get"+(b?"UTC":"")+"Day"]()},"%W":function(a,b){return f(a,1,b)},"%x":function(a,b){return n["%m"](a,b)+"/"+n["%d"](a,b)+"/"+n["%y"](a,b)},"%X":function(a,b){return n["%H"](a,b)+":"+n["%M"](a,b)+":"+n["%S"](a,b)},"%y":function(a,b){return n["%Y"](a,b).substr(-2)},"%Y":function(a,b){return""+a["get"+(b?"UTC":"")+"FullYear"]()},"%Z":function(a,b){var c=void 0;return b&&"UTC"||(c=a.toString().match(/[A-Z][A-Z][A-Z]/))&&c[0]},"%%":function(){return"%"}};c["default"]=new j["default"]({date:g,exit:h})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../Table":3}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../Table"),f=d(e);c["default"]=new f["default"]({preload:new f["default"],loaded:new f["default"]}),b.exports=c["default"]},{"../Table":3}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=""+a;for(var b in x)x.hasOwnProperty(b)&&(a=a.replace(new RegExp(b,"g"),x[b]));for(var c=a.length,d=0,b=0;c>b;b++){var e=a.substr(b,1);if(!b||"\\"!=a.substr(b-1,1)){var f=!1;"["==e?(d&&(f=!0),d++):"]"==e&&"\\"!==a.substr(b-1,1)&&(d--,d&&(f=!0)),f&&(a=a.substr(0,b)+a.substr(b++ +1),c++)}}return a}function f(a,b,c){return void 0===b&&(b=1),a=(0,w.coerceArgToString)(a,"byte",1),b=(0,w.coerceArgToNumber)(b,"byte",2),c=void 0===c?b:(0,w.coerceArgToNumber)(c,"byte",3),a.substring(b-1,c).split("").map(function(a){return a.charCodeAt(0)})}function g(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b.map(function(a,b){return a=(0,w.coerceArgToNumber)(a,"char",b),String.fromCharCode(a)}).join("")}function h(a){throw a=(0,w.coerceArgToFunction)(a,"dump",1),new v["default"]("string.dump() is not supported")}function i(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2],d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(a=(0,w.coerceArgToString)(a,"find",1),b=(0,w.coerceArgToString)(b,"find",2),c=(0,w.coerceArgToNumber)(c,"find",3),d=(0,w.coerceToBoolean)(d),!d){b=e(b);var f=new RegExp(b),g=a.substr(c-1).search(f);if(0>g)return;var h=a.substr(c-1).match(f),i=[g+c,g+c+h[0].length-1];return h.shift(),i.concat(h)}var j=a.indexOf(b,c-1);return-1===j?void 0:[j+1,j+b.length]}function j(a,b){a=(0,w.coerceArgToString)(a,"gmatch",1),b=(0,w.coerceArgToString)(b,"gmatch",2),b=e(b);var c=new RegExp(b,"g"),d=a.match(c);return function(){var a=d.shift(),c=new RegExp(b).exec(a);if(void 0!==a)return c.shift(),c.length?c:a}}function k(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?1/0:arguments[3];a=(0,w.coerceArgToString)(a,"gsub",1),b=(0,w.coerceArgToString)(b,"gsub",2),d=(0,w.coerceArgToNumber)(d,"gsub",3),b=e(""+b);for(var f="function"==typeof c,g=0,h="",i=void 0,j=void 0,k=void 0,l=void 0;d>g&&a&&(k=a.match(b));)f?(i=c(k[0]),i instanceof Array&&(i=i[0]),void 0===i&&(i=k[0])):i=c instanceof t["default"]?c.get(k[0]):"object"==typeof c?c[k]:(""+c).replace(/%([0-9])/g,function(a,b){return k[b]}),j=0===k[0].length&&void 0===l?"":a.split(k[0],1)[0],l=k[0],h+=""+j+i,a=a.substr((""+j+l).length),g++;return[""+h+a,g]}function l(a){return a=(0,w.coerceArgToString)(a,"len",1),a.length}function m(a){return a=(0,w.coerceArgToString)(a,"lower",1),a.toLowerCase()}function n(a,b){var c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];a=(0,w.coerceArgToString)(a,"match",1),b=(0,w.coerceArgToString)(b,"match",2),c=(0,w.coerceArgToNumber)(c,"match",3),a=a.substr(c);var d=a.match(new RegExp(e(b)));return d?d[1]?(d.shift(),d):d[0]:void 0}function o(a,b){return a=(0,w.coerceArgToString)(a,"rep",1),b=(0,w.coerceArgToNumber)(b,"rep",2),Array(b+1).join(a)}function p(a){return a=(0,w.coerceArgToString)(a,"reverse",1),Array.prototype.map.call(a,function(a){return a}).reverse().join("")}function q(a,b,c){return void 0===b&&(b=1),a=(0,w.coerceArgToString)(a,"sub",1),b=(0,w.coerceArgToNumber)(b,"sub",2),void 0===c?a.length:c=(0,w.coerceArgToNumber)(c,"sub",3),b>0?b-=1:0>b&&(b=a.length+b),0>c&&(c=a.length+c+1),a.substring(b,c)}function r(a){return a=(0,w.coerceArgToString)(a,"upper",1),a.toUpperCase()}Object.defineProperty(c,"__esModule",{value:!0}),c["byte"]=f,c["char"]=g,c.dump=h,c.find=i,c.gmatch=j,c.gsub=k,c.len=l,c.lower=m,c.match=n,c.rep=o,c.reverse=p,c.sub=q,c.upper=r;var s=a("../Table"),t=d(s),u=a("../LuaError"),v=d(u),w=(a("./string"),a("../utils")),x={"([^a-zA-Z0-9%(])-":"$1*?","(.)-([^a-zA-Z0-9?])":"$1*?$2","(.)-$":"$1*?","%a":"[a-zA-Z]","%A":"[^a-zA-Z]","%c":"[\x00-]","%C":"[^\x00-]","%d":"\\d","%D":"[^d]","%l":"[a-z]","%L":"[^a-z]","%p":"[.,\"'?!;:#$%&()*+-/<>=@\\[\\]\\\\^_{}|~]","%P":"[^.,\"'?!;:#$%&()*+-/<>=@\\[\\]\\\\^_{}|~]","%s":"[ \\t\\n\\f\\v\\r]","%S":"[^ 	\n\f\x0B\r]","%u":"[A-Z]","%U":"[^A-Z]","%w":"[a-zA-Z0-9]","%W":"[^a-zA-Z0-9]","%x":"[a-fA-F0-9]","%X":"[^a-fA-F0-9]","%([^a-zA-Z])":"\\$1"},y=new t["default"]({"byte":f,"char":g,dump:h,find:i,gmatch:j,gsub:k,len:l,lower:m,match:n,rep:o,reverse:p,sub:q,upper:r});c["default"]=y;var z=new t["default"]({__index:y});c.metatable=z},{"../LuaError":1,"../Table":3,"../utils":12,"./string":9}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d){return void 0===b&&(b=""),void 0===c&&(c=1),a=(0,n.coerceArgToTable)(a,"concat",1),b=(0,n.coerceArgToString)(b,"concat",2),c=(0,n.coerceArgToNumber)(c,"concat",3),d=void 0===d?h(a):(0,n.coerceArgToNumber)(d,"concat",4),[].concat(a.numValues).splice(c,d-c+1).join(b)}function f(a){a=(0,n.coerceArgToTable)(a,"getn",1);var b=a.numValues,c=[],d=0;for(var e in b)b.hasOwnProperty(e)&&(c[e]=!0);for(;c[d+1];)d++;if(d>0&&void 0===b[d]){for(var e=0;d-e>1;){var f=Math.floor((e+d)/2);void 0===b[f]?d=f:e=f}return e}return d}function g(a,b,c){a=(0,n.coerceArgToTable)(a,"insert",1),void 0===c?(c=b,b=a.numValues.length):b=(0,n.coerceArgToNumber)(b,"insert",2),a.numValues.splice(b,0,void 0),a.set(b,c)}function h(a){return a=(0,n.coerceArgToTable)(a,"maxn",1),a.numValues.length-1}function i(a,b){a=(0,n.coerceArgToTable)(a,"remove",1),b=(0,n.coerceArgToNumber)(b,"remove",2);var c=f(a),d=a.numValues;if(!(b>c)){void 0===b&&(b=c);for(var e=d.splice(b,1);c>b&&void 0===d[b];)delete d[b++];return e}}function j(a,b){a=(0,n.coerceArgToTable)(a,"sort",1);var c=void 0,d=a.numValues;b?(b=(0,n.coerceArgToFunction)(b,"sort",2),c=function(a,c){return(0,n.coerceToBoolean)(b(a,c)[0])?-1:1}):c=function(a,b){return b>a?-1:1},d.shift(),d.sort(c).unshift(void 0)}Object.defineProperty(c,"__esModule",{value:!0}),c.concat=e,c.getn=f,c.insert=g,c.maxn=h,c.remove=i,c.sort=j;var k=a("../Table"),l=d(k),m=a("../LuaError"),n=(d(m),a("../utils"));c["default"]=new l["default"]({concat:e,getn:f,insert:g,maxn:h,remove:i,sort:j})},{"../LuaError":1,"../Table":3,"../utils":12}],11:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b,c,d){var e=void 0,f=void 0;return a&&a instanceof m["default"]&&(e=a.metatable)&&(f=e.rawget(c))||b&&b instanceof m["default"]&&(e=b.metatable)&&(f=e.rawget(c))?f(a,b)[0]:("number"!=typeof a&&(a=(0,n.coerceToNumber)(a,"attempt to perform arithmetic on a %type value")),"number"!=typeof b&&(b=(0,n.coerceToNumber)(b,"attempt to perform arithmetic on a %type value")),d(a,b))}function g(a,b){var c=void 0,d=void 0;return a&&a instanceof m["default"]&&(c=a.metatable)&&(d=c.rawget("__concat"))||b&&b instanceof m["default"]&&(c=b.metatable)&&(d=c.rawget("__concat"))?d(a,b)[0]:(b=(0,n.coerceToString)(b,"attempt to concatenate a %type value"),a=(0,n.coerceToString)(a,"attempt to concatenate a %type value"),""+a+b)}function h(a,b){var c,d,e;return b!==a&&a&&a instanceof m["default"]&&b&&b instanceof m["default"]&&(c=a.metatable)&&(d=b.metatable)&&c===d&&(e=c.rawget("__eq"))?!!e(a,b)[0]:a===b}function i(a,b){if(0===b||b===-(1/0)||b===1/0||d.isNaN(a)||d.isNaN(b))return NaN;var c=Math.abs(b),e=Math.abs(a)%c;return 0>a*b&&(e=c-e),0>b&&(e*=-1),e}function j(a){if(void 0===a)throw new q["default"]("attempt to get length of a nil value");if(a instanceof m["default"])return(0,o.getn)(a);if("object"==typeof a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b}return a.length}function k(a){var b,c;return a&&a instanceof m["default"]&&(b=a.metatable)&&(c=b.rawget("__unm"))?c(a)[0]:("number"!=typeof a&&(a=(0,n.coerceToNumber)(a,"attempt to perform arithmetic on a %type value")),-a)}Object.defineProperty(c,"__esModule",{value:!0});var l=a("./Table"),m=e(l),n=a("./utils"),o=a("./lib/table"),p=a("./LuaError"),q=e(p),r={concat:g,len:j,eq:h,unm:k,bool:n.coerceToBoolean,neq:function(){return!h.apply(void 0,arguments)},not:function(){return!n.coerceToBoolean.apply(void 0,arguments)},add:function(a,b){return f(a,b,"__add",function(a,b){return a+b})},sub:function(a,b){return f(a,b,"__sub",function(a,b){return a-b})},mul:function(a,b){return f(a,b,"__mul",function(a,b){return a*b})},div:function(a,b){if(void 0===b)throw new q["default"]("attempt to perform arithmetic on a nil value");return f(a,b,"__div",function(a,b){return a/b})},mod:function(a,b){return f(a,b,"__mod",i)},pow:function(a,b){return f(a,b,"__pow",Math.pow)},lt:function(a,b){return f(a,b,"__lt",function(a,b){return b>a})},lte:function(a,b){return f(a,b,"__le",function(a,b){return b>=a})},gt:function(a,b){return!r.lte(a,b)},gte:function(a,b){return!r.lt(a,b)}};c["default"]=r,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./LuaError":1,"./Table":3,"./lib/table":10,"./utils":12}],12:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){console.log.apply(console,arguments)}function f(a,b){if(b)throw b=(""+b).replace(/\%type/gi,(0,o.type)(a)),new q["default"](b)}function g(a){return!(a===!1||void 0===a)}function h(a,b){var c=void 0,d=void 0,e=void 0;switch(!0){case"number"==typeof a:return a;case void 0===a:return;case"inf"===a:return 1/0;case"-inf"===a:return-(1/0);case"nan"===a:return NaN;default:return(""+a).match(t)?c=parseFloat(a):(d=(""+a).match(u))&&(e=d[3],((c=d[2])||e)&&(c=parseInt(c,16)||0,e&&(c+=parseInt(e,16)/Math.pow(16,e.length)),d[1]&&(c*=-1))),void 0===c&&f(a,b),c}}function i(a,c){switch(!0){case"string"==typeof a:return a;case void 0===a:case null===a:return"nil";case a===1/0:return"inf";case a===-(1/0):return"-inf";case"number"==typeof a:case"boolean"==typeof a:return b.isNaN(a)?"nan":""+a;default:return f(a,c)||""}}function j(a,b,c,d,e){return b(a,"bad argument #"+e+" to '"+d+"' ("+c+" expected, got %type)")}function k(a,b,c){return j(a,h,"number",b,c)}function l(a,b,c){return j(a,i,"string",b,c)}function m(a,b,c){if(a instanceof s["default"])return a;var d=(0,o.type)(a);throw new q["default"]("bad argument #"+c+" to '"+b+"' (table expected, got "+d+")")}function n(a,b,c){if(a instanceof Function)return a;var d=(0,o.type)(a);throw new q["default"]("bad argument #"+c+" to '"+b+"' (function expected, got "+d+")")}Object.defineProperty(c,"__esModule",{value:!0}),c.coerceToBoolean=g,c.coerceToNumber=h,c.coerceToString=i,c.coerceArgToNumber=k,c.coerceArgToString=l,c.coerceArgToTable=m,c.coerceArgToFunction=n;var o=a("./lib/globals"),p=a("./LuaError"),q=d(p),r=a("./Table"),s=d(r),t=/^[-+]?[0-9]*\.?([0-9]+([eE][-+]?[0-9]+)?)?$/,u=/^(\-)?0x([0-9a-fA-F]*)\.?([0-9a-fA-F]*)$/,v={writeln:function(){var a=void 0,c=void 0,d=void 0;return(a=b.starlight)&&(c=a.config)&&(d=c.stdout)&&d.writeln||e}()};c.stdout=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./LuaError":1,"./Table":3,"./lib/globals":5}]},{},[4]),function(starlight){function jsToLua(obj){var t,mt;return mt=new T({__index:function(t,key){if(void 0===obj||null===obj)throw new starlight.runtime.LuaError("attempt to index a nil value");var property=obj[key],i,children,child;if("function"==typeof property||property&&property.prototype&&"function"==typeof property.prototype.constructor){var f=function(){var a=convertArguments(arguments,luaToJS),b=property.apply(a.shift(),a);return"object"==typeof b?jsToLua(b):[b]};if(Object.getOwnPropertyNames)for(children=Object.getOwnPropertyNames(property),i=0;child=children[i];i++)"caller"!=child&&"callee"!=child&&"arguments"!=child&&(f[child]=property[child]);return f["new"]=function(){var args=convertArguments(arguments,luaToJS),argStr,obj,i,l;for(argStr=(l=args.length)?"args[0]":"",
i=1;l>i;i++)argStr+=",args["+i+"]";return obj=eval("new property("+argStr+")"),jsToLua(obj)},f}return"object"==typeof property?jsToLua(property):property},__newindex:function(a,b,c){obj[b]=luaToJS(c)}}),mt.source=obj,t=new T,t.metatable=mt,t}function luaToJS(a){var b;if(a instanceof Function)return function(){return jsToLua(a.apply(void 0,convertArguments(arguments,jsToLua)))};if(a instanceof T){if((b=a.metatable)&&b.source)return b.source;var c,d=getn(a)>0,e=d?[]:{},f=a.numValues,g=a.strValues,h=f.length;for(c=1;h>c;c++)e[c-1]=f[c]instanceof T?luaToJS(f[c]):f[c];for(c in g)g.hasOwnProperty(c)&&(e[c]=a[c]instanceof T?luaToJS(a[c]):a[c]);return e}return a}function convertArguments(a,b){var c,d,e=[];for(c=0,d=a.length;d>c;c++)e.push(b(a[c]));return e}var T=starlight.runtime.T,_G=starlight.runtime.globalScope,getn=_G.get("table").get("getn"),win=jsToLua(window);_G.set("window",win),win.set("extract",function(){var a,b;for(b in window)"print"!==b&&"window"!==b&&null!==win[b]&&(a=_G.get("window").get(b),_G.set(b,"function"==typeof a?a.bind(void 0,window):a))})}(window.starlight),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=function(a){function b(a,c){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.base=a,this.property=c}return e(b,a),f(b,[{key:"get",value:function(){return"Tget("+this.base+", "+this.property+")"}},{key:"set",value:function(a){return"Tset("+this.base+", "+this.property+", "+a+")"}},{key:"toString",value:function(){return this.get()}},{key:"valueOf",value:function(){return this.get()}}]),b}(String);c["default"]=h,b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=o++,c="let $"+b+" = $"+a+".extend(), $ = $"+b+";";return{scope:b,scopeDef:c}}function f(a,b){var c=h(a,b);return"Identifier"===a.type?"$get($, '"+c+"')":c}function g(a){return!!a.type.match(/CallExpression$/)}function h(a,b){var c=t[a.type];if(!c)throw console.info(a),new Error("No generator found for: "+a.type);return c.call(t,a,b)}function i(){var a="let __star = global.starlight.runtime, $0 = __star.globalScope, $ = $0, __star_tmp;\n";return a+="let __star_call = __star.call, __star_T = __star.T, __star_op_bool = __star.op.bool;",a+="let __star_op_unm = __star.op.unm, __star_op_not = __star.op.not, __star_op_len = __star.op.len, __star_op_concat = __star.op.concat, __star_op_add = __star.op.add, __star_op_sub = __star.op.sub, __star_op_mul = __star.op.mul, __star_op_div = __star.op.div, __star_op_mod = __star.op.mod, __star_op_eq = __star.op.eq, __star_op_neq = __star.op.neq, __star_op_lt = __star.op.lt, __star_op_gt = __star.op.gt, __star_op_lte = __star.op.lte, __star_op_gte = __star.op.gte, __star_op_pow = __star.op.pow;",a+="let __star_op_and = __star.op.and, __star_op_or = __star.op.or;\n",a+="let Tget, Tset, Tins, $get, $set, $setLocal, __star_shift;",a+="()=>{",a+="let call = Function.prototype.call, bind = call.bind.bind(call), Tproto = __star_T.prototype, $proto = __star.globalScope.constructor.prototype;",a+="Tget = bind(Tproto.get), Tset = bind(Tproto.set), Tins = bind(Tproto.insert);",a+="$get = bind($proto.get), $set = bind($proto.set), $setLocal = bind($proto.setLocal);",a+="__star_shift = bind(Array.prototype.shift);",a+="}();"}function j(a){return h(a,0)}Object.defineProperty(c,"__esModule",{value:!0});var k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[n.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(n.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.getRuntimeInit=i,c.generateJS=j;var l=a("./MemExpr"),m=d(l),n=n||{iterator:function(){}},o=1,p=0,q=0,r={"-":"unm",not:"not","#":"len"},s={"..":"concat","+":"add","-":"sub","*":"mul","/":"div","%":"mod","==":"eq","~=":"neq","<":"lt",">":"gt","<=":"lte",">=":"gte","^":"pow"},t={AssignmentStatement:function(a,b){var c=!0,d=a.variables.map(function(a,c){var d=void 0;if(d=f(a,b),d instanceof m["default"])return d.set("__star_tmp["+c+"]");var e=[].concat(d.match(/^\$get\((.*)\)$/)),g=k(e,2),h=g[0],i=g[1];if(!h)throw new Error("Unhandled");return"$set("+i+", __star_tmp["+c+"])"}).join(";\n"),e=a.init.map(function(a,d){var e=f(a,b);return g(a)?(c=!1,"..."+e):e});return c?d.replace(/__star_tmp\[(\d+)\]/g,function(a,b){return e[b]}):"__star_tmp = ["+e.join(", ")+"];"+d},BinaryExpression:function(a,b){var c=f(a.left,b),d=f(a.right,b),e=s[a.operator];if(g(a.left)&&(c+="[0]"),g(a.right)&&(d+="[0]"),!e)throw console.info(a),new Error("Unhandled binary operator: "+a.operator);return"__star_op_"+e+"("+c+", "+d+")"},BooleanLiteral:function(a){return a.value?"true":"false"},BreakStatement:function(a){return"break"},CallStatement:function(a,b){return h(a.expression,b)},CallExpression:function(a,b){var c=f(a.base,b),d=a.arguments.map(function(a){var c=f(a,b),d=g(a)?"...":"";return""+d+c});return g(a.base)?d.unshift(c+"[0]"):(c instanceof m["default"]&&":"===a.base.indexer&&d.unshift(c.base),d.unshift(""+c)),"__star_call("+d+")"},Chunk:function(a,b){var c=a.body.map(function(a){return h(a,b)+";"});return c.join("\n")},DoStatement:function(a,b){var c=e(b),d=c.scope,f=c.scopeDef,g=this.Chunk(a,d);return"()=>{\n"+f+"\n"+g+"\n}()"},ElseClause:function(a,b){var c=this.Chunk(a,b);return"{\n"+c+"\n}"},ElseifClause:function(a,b){return this.IfClause(a,b)},ForNumericStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,i=h(a.variable,b),j=f(a.start,b),k=f(a.end,b),l=null===a.step?1:h(a.step,b),m=l>0?"<=":">=",n=this.Chunk(a,d),o=++q,p="$"+b+"._forLoop"+o+" = "+j,r="$"+b+"._forLoop"+o+" "+m+" "+k,s="$"+b+"._forLoop"+o+" += "+l,t="$"+d+".setLocal('"+i+"',$"+b+"._forLoop"+o+");";return"for ("+p+"; "+r+"; "+s+") {\n"+g+"\n"+t+"\n"+n+"\n}"},ForGenericStatement:function(a,b){console.assert(1===a.iterators.length,"Only one iterator is assumed. Need to implement more!");var c=e(b),d=c.scope,g=c.scopeDef,i=f(a.iterators[0],b),j=this.Chunk(a,d),k=a.variables.map(function(a,b){var c=h(a,d);return"$setLocal($, '"+c+"', __star_tmp["+b+"])"}).join(";\n"),l=g.split(", ");return l[0]+";\n[$"+d+"._iterator, $"+d+"._table, $"+d+"._next] = "+i+";\nwhile((__star_tmp = __star_call($"+d+"._iterator, $"+d+"._table, $"+d+"._next)),__star_tmp[0] !== undefined) {\nlet "+l[1]+"$"+d+"._next = __star_tmp[0]\n"+k+"\n"+j+"\n}"},FunctionDeclaration:function(a,b){var c=e(b),d=c.scope,f=c.scopeDef,g=!a.identifier,i=g?"":h(a.identifier,b),j=i instanceof m["default"],k=a.parameters.map(function(a,b){var c=h(a,d);return"...$.getVarargs()"===c?"$.setVarargs(args)":"$setLocal($, '"+c+"', __star_shift(args))"}),l=void 0;j?(l=i.property.replace(/'/g,""),":"===a.identifier.indexer&&k.unshift("$set($, 'self', __star_shift(args))")):l=i;var n=k.join(";\n"),o=this.Chunk(a,d),q=g?"":"func$",r="(__star_tmp = function "+q+l+"(...args){"+f+"\n"+n+";\n"+o+" return [];}, __star_tmp.toString=()=>'function: 0x"+(++p).toString(16)+"', __star_tmp)";return g?r:j?i.set(r):"$set($, '"+i+"', "+r+")"},Identifier:function(a,b){return a.name},IfClause:function(a,b){var c=f(a.condition,b);g(a.condition)&&(c+="[0]");var d=this.Chunk(a,b);return"if (__star_op_bool("+c+")) {\n"+d+"\n}"},IfStatement:function(a,b){var c=a.clauses.map(function(a){return h(a,b)});return c.join(" else ")},IndexExpression:function(a,b){var c=f(a.base,b),d=f(a.index,b);return g(a.base)&&(c+="[0]"),g(a.index)&&(d+="[0]"),new m["default"](c,d)},LocalStatement:function(a,b){var c=!0,d=a.variables.map(function(a,c){var d=h(a,b);return"$setLocal($, '"+d+"', __star_tmp["+c+"])"}).join(";\n"),e=a.init.map(function(a,d){var e=f(a,b);return g(a)&&(c=!1,e="..."+e),e});return"__star_tmp = ["+e.join(", ")+"];"+d},LogicalExpression:function(a,b){var c=f(a.left,b),d=f(a.right,b),e=a.operator;if("and"===e)return"(!__star.op.bool("+c+")?"+c+":"+d+")";if("or"===e)return"(__star.op.bool("+c+")?"+c+":"+d+")";throw console.info(a),new Error("Unhandled logical operator: "+a.operator)},MemberExpression:function(a,b){var c=f(a.base,b),d=h(a.identifier,b);return g(a.base)&&(c+="[0]"),new m["default"](c,"'"+d+"'")},NilLiteral:function(a){return"undefined"},NumericLiteral:function(a){return a.value.toString()},RepeatStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,h=f(a.condition,b),i=this.Chunk(a,d);return"do{\n"+g+"\n"+i+"\n}while(!("+h+"))"},ReturnStatement:function(a,b){var c=a.arguments.map(function(a){var c=f(a,b);return g(a)?"..."+c:c}).join(", ");return"return ["+c+"];"},StringCallExpression:function(a,b){return a.arguments=a.argument,this.TableCallExpression(a,b)},StringLiteral:function(a){var b=a.value.replace(/["']/g,"\\$&").replace(/\n/g,"\\n");return"'"+b+"'"},TableCallExpression:function(a,b){var c=f(a.base,b),d=[h(a.arguments,b)];return g(a.base)?"__star_call("+c+"[0],"+d+")":(c instanceof m["default"]&&":"===a.base.indexer&&d.unshift(c.base),"__star_call("+c+","+d+")")},TableConstructorExpression:function(a,b){var c=a.fields.map(function(a){return h(a,b)}).join(";\n");return"new __star_T(t => {"+c+"})"},TableKeyString:function(a,b){var c=h(a.key,b),d=f(a.value,b);return"Tset(t, '"+c+"', "+d+")"},TableKey:function(a,b){var c=h(a.key,b),d=f(a.value,b);return"Tset(t, "+c+", "+d+")"},TableValue:function(a,b){var c=f(a.value,b),d=g(a.value)?"...":"";return"Tins(t, "+d+c+")"},UnaryExpression:function(a,b){var c=r[a.operator],d=f(a.argument,b);if(g(a.argument)&&(d+="[0]"),!c)throw console.info(a),new Error("Unhandled unary operator: "+a.operator);return"__star_op_"+c+"("+d+")"},VarargLiteral:function(a){return"...$.getVarargs()"},WhileStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,h=f(a.condition,b),i=this.Chunk(a,d);return"while("+h+") {\n"+g+"\n"+i+"\n}"}}},{"./MemExpr":1}],3:[function(a,b,c){(function(b){"use strict";function c(a){return a&&a.__esModule?a:{"default":a}}function d(a){var c=i["default"].parse(a),d=(0,g.getRuntimeInit)()+(0,g.generateJS)(c),e=b.babel;return e&&(d="()=>{"+d+"}",d=e.transform(d).code,d=d.substr(14,d.length-15),d=d.replace("\n(function","\nreturn (function")+".apply(void 0, arguments);"),d}function e(a){return new Function("var global = this;"+d(a)).bind(b||window)}function f(){var a,b,c,d,f=document.querySelectorAll('script[type="application/x-lua"]'),g="";for(b=0;a=f[b];b++)c=a.dataset.modname,d=a.textContent,g+=c?" rawset(package.preload, '"+c+"', function(...) "+d+" end) ":d;g&&e(g)()}var g=a("./code-generator"),h=a("luaparse"),i=c(h);void 0===typeof b&&(b=window),b.document&&b.document.querySelector('script[src$="starlight.js"][data-run-script-tags]')&&b.document.addEventListener("DOMContentLoaded",f),b.starlight=b.starlight||{},b.starlight.parser={parse:e,parseToString:d,runScriptTags:f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./code-generator":2,luaparse:4}],4:[function(a,b,c){(function(a){!function(d,e,f){"use strict";var g={"function":!0,object:!0},h=g[typeof c]&&c&&!c.nodeType&&c,i=g[typeof b]&&b&&!b.nodeType&&b,j=i&&i.exports===h&&h,k=g[typeof a]&&a;!k||k.global!==k&&k.window!==k||(d=k),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(define(["exports"],f),h&&j&&f(i.exports)):f(h&&i?j?i.exports:h:d[e]={})}(this,"luaparse",function(a){"use strict";function b(a){if(Wa){var b=Xa.pop();b.complete(),va.locations&&(a.loc=b.loc),va.ranges&&(a.range=b.range)}return va.onCreateNode&&va.onCreateNode(a),a}function c(a,b,c){for(var d=0,e=a.length;e>d;d++)if(a[d][b]===c)return d;return-1}function d(a){var b=Ra.call(arguments,1);return a=a.replace(/%(\d)/g,function(a,c){return""+b[c-1]||""})}function e(){for(var a,b,c=Ra.call(arguments),d={},e=0,f=c.length;f>e;e++){a=c[e];for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b])}return d}function f(a){var b,c,e=d.apply(null,Ra.call(arguments,1));throw"undefined"!=typeof a.line?(c=a.range[0]-a.lineStart,b=new SyntaxError(d("[%1:%2] %3",a.line,c,e)),b.line=a.line,b.index=a.range[0],b.column=c):(c=Ha-Oa+1,b=new SyntaxError(d("[%1:%2] %3",Na,c,e)),b.index=Ha,b.line=Na,b.column=c),b}function g(a,b){f(b,Pa.expectedToken,a,b.value)}function h(a,b){if("undefined"==typeof b&&(b=Ka.value),"undefined"!=typeof a.type){var c;switch(a.type){case za:c="string";break;case Aa:c="keyword";break;case Ba:c="identifier";break;case Ca:c="number";break;case Da:c="symbol";break;case Ea:c="boolean";break;case Fa:return f(a,Pa.unexpected,"symbol","nil",b)}return f(a,Pa.unexpected,c,a.value,b)}return f(a,Pa.unexpected,"symbol",a,b)}function i(){for(k();45===ua.charCodeAt(Ha)&&45===ua.charCodeAt(Ha+1);)u(),k();if(Ha>=wa)return{type:ya,value:"<eof>",line:Na,lineStart:Oa,range:[Ha,Ha]};var a=ua.charCodeAt(Ha),b=ua.charCodeAt(Ha+1);if(Ma=Ha,D(a))return l();switch(a){case 39:case 34:return o();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return q();case 46:return B(b)?q():46===b?46===ua.charCodeAt(Ha+2)?n():m(".."):m(".");case 61:return m(61===b?"==":"=");case 62:return m(61===b?">=":">");case 60:return m(61===b?"<=":"<");case 126:return 61===b?m("~="):f({},Pa.expected,"=","~");case 58:return m(58===b?"::":":");case 91:return 91===b||61===b?p():m("[");case 42:case 47:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return m(ua.charAt(Ha))}return h(ua.charAt(Ha))}function j(){var a=ua.charCodeAt(Ha),b=ua.charCodeAt(Ha+1);return A(a)?(10===a&&13===b&&Ha++,13===a&&10===b&&Ha++,Na++,Oa=++Ha,!0):!1}function k(){for(;wa>Ha;){var a=ua.charCodeAt(Ha);if(z(a))Ha++;else if(!j())break}}function l(){for(var a,b;E(ua.charCodeAt(++Ha)););return a=ua.slice(Ma,Ha),F(a)?b=Aa:"true"===a||"false"===a?(b=Ea,a="true"===a):"nil"===a?(b=Fa,a=null):b=Ba,{type:b,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function m(a){return Ha+=a.length,{type:Da,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function n(){return Ha+=3,{type:Ga,value:"...",line:Na,lineStart:Oa,range:[Ma,Ha]}}function o(){for(var a,b=ua.charCodeAt(Ha++),c=Ha,d="";wa>Ha&&(a=ua.charCodeAt(Ha++),b!==a);)92===a?(d+=ua.slice(c,Ha-1)+t(),c=Ha):(Ha>=wa||A(a))&&(d+=ua.slice(c,Ha-1),f({},Pa.unfinishedString,d+String.fromCharCode(a)));return d+=ua.slice(c,Ha-1),{type:za,value:d,line:Na,lineStart:Oa,range:[Ma,Ha]}}function p(){var a=v();return!1===a&&f(Ia,Pa.expected,"[",Ia.value),{type:za,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function q(){var a=ua.charAt(Ha),b=ua.charAt(Ha+1),c="0"===a&&"xX".indexOf(b||null)>=0?r():s();return{type:Ca,value:c,line:Na,lineStart:Oa,range:[Ma,Ha]}}function r(){var a,b,c,d,e=0,g=1,h=1;for(d=Ha+=2,C(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));C(ua.charCodeAt(Ha));)Ha++;if(a=parseInt(ua.slice(d,Ha),16),"."===ua.charAt(Ha)){for(b=++Ha;C(ua.charCodeAt(Ha));)Ha++;e=ua.slice(b,Ha),e=b===Ha?0:parseInt(e,16)/Math.pow(16,Ha-b)}if("pP".indexOf(ua.charAt(Ha)||null)>=0){for(Ha++,"+-".indexOf(ua.charAt(Ha)||null)>=0&&(h="+"===ua.charAt(Ha++)?1:-1),c=Ha,B(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));B(ua.charCodeAt(Ha));)Ha++;g=ua.slice(c,Ha),g=Math.pow(2,g*h)}return(a+e)*g}function s(){for(;B(ua.charCodeAt(Ha));)Ha++;if("."===ua.charAt(Ha))for(Ha++;B(ua.charCodeAt(Ha));)Ha++;if("eE".indexOf(ua.charAt(Ha)||null)>=0)for(Ha++,"+-".indexOf(ua.charAt(Ha)||null)>=0&&Ha++,B(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));B(ua.charCodeAt(Ha));)Ha++;return parseFloat(ua.slice(Ma,Ha))}function t(){var a=Ha;switch(ua.charAt(Ha)){case"n":return Ha++,"\n";case"r":return Ha++,"\r";case"t":return Ha++,"	";case"v":return Ha++,"\x0B";case"b":return Ha++,"\b";case"f":return Ha++,"\f";case"z":return Ha++,k(),"";case"x":return C(ua.charCodeAt(Ha+1))&&C(ua.charCodeAt(Ha+2))?(Ha+=3,"\\"+ua.slice(a,Ha)):"\\"+ua.charAt(Ha++);default:if(B(ua.charCodeAt(Ha))){for(;B(ua.charCodeAt(++Ha)););return"\\"+ua.slice(a,Ha)}return ua.charAt(Ha++)}}function u(){Ma=Ha,Ha+=2;var a=ua.charAt(Ha),b="",c=!1,d=Ha,e=Oa,f=Na;if("["===a&&(b=v(),!1===b?b=a:c=!0),!c){for(;wa>Ha&&!A(ua.charCodeAt(Ha));)Ha++;va.comments&&(b=ua.slice(d,Ha))}if(va.comments){var g=Qa.comment(b,ua.slice(Ma,Ha));va.locations&&(g.loc={start:{line:f,column:Ma-e},end:{line:Na,column:Ha-Oa}}),va.ranges&&(g.range=[Ma,Ha]),va.onCreateNode&&va.onCreateNode(g),La.push(g)}}function v(){var a,b,c=0,d="",e=!1;for(Ha++;"="===ua.charAt(Ha+c);)c++;if("["!==ua.charAt(Ha+c))return!1;for(Ha+=c+1,A(ua.charCodeAt(Ha))&&j(),b=Ha;wa>Ha;){if(A(ua.charCodeAt(Ha))&&j(),a=ua.charAt(Ha++),"]"===a){e=!0;for(var f=0;c>f;f++)"="!==ua.charAt(Ha+f)&&(e=!1);"]"!==ua.charAt(Ha+c)&&(e=!1)}if(e)break}return d+=ua.slice(b,Ha-1),Ha+=c+1,d}function w(){Ja=Ia,Ia=Ka,Ka=i()}function x(a){return a===Ia.value?(w(),!0):!1}function y(a){a===Ia.value?w():f(Ia,Pa.expected,a,Ia.value)}function z(a){return 9===a||32===a||11===a||12===a}function A(a){return 10===a||13===a}function B(a){return a>=48&&57>=a}function C(a){return a>=48&&57>=a||a>=97&&102>=a||a>=65&&70>=a}function D(a){return a>=65&&90>=a||a>=97&&122>=a||95===a}function E(a){return a>=65&&90>=a||a>=97&&122>=a||95===a||a>=48&&57>=a}function F(a){switch(a.length){case 2:return"do"===a||"if"===a||"in"===a||"or"===a;case 3:return"and"===a||"end"===a||"for"===a||"not"===a;case 4:return"else"===a||"goto"===a||"then"===a;case 5:return"break"===a||"local"===a||"until"===a||"while"===a;case 6:return"elseif"===a||"repeat"===a||"return"===a;case 8:return"function"===a}return!1}function G(a){return Da===a.type?"#-".indexOf(a.value)>=0:Aa===a.type?"not"===a.value:!1}function H(a){switch(a.type){case"CallExpression":case"TableCallExpression":case"StringCallExpression":return!0}return!1}function I(a){if(ya===a.type)return!0;if(Aa!==a.type)return!1;switch(a.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}function J(){var a=Array.apply(null,Ta[Ua++]);Ta.push(a),va.onCreateScope&&va.onCreateScope()}function K(){Ta.pop();Ua--,va.onDestroyScope&&va.onDestroyScope()}function L(a){-1===Sa(Ta[Ua],a)&&Ta[Ua].push(a)}function M(a){L(a.name),N(a,!0)}function N(a,b){b||-1!==c(Va,"name",a.name)||Va.push(a),a.isLocal=b}function O(a){return-1!==Sa(Ta[Ua],a)}function P(){return new Q(Ia)}function Q(a){va.locations&&(this.loc={start:{line:a.line,column:a.range[0]-a.lineStart},end:{line:0,column:0}}),va.ranges&&(this.range=[a.range[0],0])}function R(){Wa&&Xa.push(P())}function S(a){Wa&&Xa.push(a)}function T(){w(),R(),va.scope&&J();var a=U();return va.scope&&K(),ya!==Ia.type&&h(Ia),Wa&&!a.length&&(Ja=Ia),b(Qa.chunk(a))}function U(a){for(var b,c=[];!I(Ia);){if("return"===Ia.value){c.push(V());break}b=V(),b&&c.push(b)}return c}function V(){if(R(),Aa===Ia.type)switch(Ia.value){case"local":return w(),da();case"if":return w(),ba();case"return":return w(),aa();case"function":w();var a=ia();return ha(a);case"while":return w(),$();case"for":return w(),ca();case"repeat":return w(),_();case"break":return w(),X();case"do":return w(),Z();case"goto":return w(),Y()}return Da===Ia.type&&x("::")?W():(Wa&&Xa.pop(),x(";")?void 0:fa())}function W(){var a=Ia.value,c=ga();return va.scope&&(L("::"+a+"::"),N(c,!0)),y("::"),b(Qa.labelStatement(c))}function X(){return b(Qa.breakStatement())}function Y(){var a=(Ia.value,ga());return b(Qa.gotoStatement(a))}function Z(){va.scope&&J();var a=U();return va.scope&&K(),y("end"),b(Qa.doStatement(a))}function $(){var a=la();y("do"),va.scope&&J();var c=U();return va.scope&&K(),y("end"),b(Qa.whileStatement(a,c))}function _(){va.scope&&J();var a=U();y("until");var c=la();return va.scope&&K(),b(Qa.repeatStatement(c,a))}function aa(){var a=[];if("end"!==Ia.value){var c=ka();for(null!=c&&a.push(c);x(",");)c=la(),a.push(c);x(";")}return b(Qa.returnStatement(a))}function ba(){var a,c,d,e=[];for(Wa&&(d=Xa[Xa.length-1],Xa.push(d)),a=la(),y("then"),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.ifClause(a,c))),Wa&&(d=P());x("elseif");)S(d),a=la(),y("then"),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.elseifClause(a,c))),Wa&&(d=P());return x("else")&&(Wa&&(d=new Q(Ja),Xa.push(d)),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.elseClause(c)))),y("end"),b(Qa.ifStatement(e))}function ca(){var a,c=ga();if(va.scope&&(J(),M(c)),x("=")){var d=la();y(",");var e=la(),f=x(",")?la():null;return y("do"),a=U(),y("end"),va.scope&&K(),b(Qa.forNumericStatement(c,d,e,f,a))}for(var g=[c];x(",");)c=ga(),va.scope&&M(c),g.push(c);y("in");var h=[];do{var i=la();h.push(i)}while(x(","));return y("do"),a=U(),y("end"),va.scope&&K(),b(Qa.forGenericStatement(g,h,a))}function da(){var a;if(Ba===Ia.type){var c=[],d=[];do a=ga(),c.push(a);while(x(","));if(x("="))do{var e=la();d.push(e)}while(x(","));if(va.scope)for(var f=0,h=c.length;h>f;f++)M(c[f]);return b(Qa.localStatement(c,d))}return x("function")?(a=ga(),va.scope&&(M(a),J()),ha(a,!0)):void g("<name>",Ia)}function ea(a){(a.inParens||-1===["Identifier","MemberExpression","IndexExpression"].indexOf(a.type))&&f(Ia,Pa.invalidVar,Ia.value)}function fa(){var a,c,d=Ia;if(Wa&&(c=P()),a=oa(),null==a)return h(Ia);if(",=".indexOf(Ia.value)>=0){var e,f=[a],i=[];for(ea(a);x(",");)e=oa(),null==e&&g("<expression>",Ia),ea(e),f.push(e);y("=");do e=la(),i.push(e);while(x(","));return S(c),b(Qa.assignmentStatement(f,i))}return H(a)?(S(c),b(Qa.callStatement(a))):h(d)}function ga(){R();var a=Ia.value;return Ba!==Ia.type&&g("<name>",Ia),w(),b(Qa.identifier(a))}function ha(a,c){var d=[];if(y("("),!x(")"))for(;;)if(Ba===Ia.type){var e=ga();if(va.scope&&M(e),d.push(e),x(","))continue;if(x(")"))break}else{if(Ga===Ia.type){d.push(qa()),y(")");break}g("<name> or '...'",Ia)}var f=U();return y("end"),va.scope&&K(),c=c||!1,b(Qa.functionStatement(a,d,c,f))}function ia(){var a,c,d;for(Wa&&(d=P()),a=ga(),va.scope&&(N(a,O(a.name)),J());x(".");)S(d),c=ga(),a=b(Qa.memberExpression(a,".",c));return x(":")&&(S(d),c=ga(),a=b(Qa.memberExpression(a,":",c)),va.scope&&L("self")),a}function ja(){for(var a,c,d=[];;){if(R(),Da===Ia.type&&x("["))a=la(),y("]"),y("="),c=la(),d.push(b(Qa.tableKey(a,c)));else if(Ba===Ia.type)"="===Ka.value?(a=ga(),w(),c=la(),d.push(b(Qa.tableKeyString(a,c)))):(c=la(),d.push(b(Qa.tableValue(c))));else{if(null==(c=ka())){Xa.pop();break}d.push(b(Qa.tableValue(c)))}if(!(",;".indexOf(Ia.value)>=0))break;w()}return y("}"),b(Qa.tableConstructorExpression(d))}function ka(){var a=na(0);return a}function la(){var a=ka();return null!=a?a:void g("<expression>",Ia)}function ma(a){var b=a.charCodeAt(0),c=a.length;if(1===c)switch(b){case 94:return 10;case 42:case 47:case 37:return 7;case 43:case 45:return 6;case 60:case 62:return 3}else if(2===c)switch(b){case 46:return 5;case 60:case 62:case 61:case 126:return 3;case 111:return 1}else if(97===b&&"and"===a)return 2;return 0}function na(a){var c,d,e=Ia.value;if(Wa&&(d=P()),G(Ia)){R(),w();var f=na(8);null==f&&g("<expression>",Ia),c=b(Qa.unaryExpression(e,f))}if(null==c&&(c=qa(),null==c&&(c=oa())),null==c)return null;for(var h;;){if(e=Ia.value,h=Da===Ia.type||Aa===Ia.type?ma(e):0,0===h||a>=h)break;("^"===e||".."===e)&&h--,w();var i=na(h);null==i&&g("<expression>",Ia),Wa&&Xa.push(d),c=b(Qa.binaryExpression(e,c,i))}return c}function oa(){var a,c,d;if(Wa&&(d=P()),Ba===Ia.type)c=Ia.value,a=ga(),va.scope&&N(a,O(c));else{if(!x("("))return null;a=la(),y(")"),a.inParens=!0}for(var e,f;;)if(Da===Ia.type)switch(Ia.value){case"[":S(d),w(),e=la(),a=b(Qa.indexExpression(a,e)),y("]");break;case".":S(d),w(),f=ga(),a=b(Qa.memberExpression(a,".",f));break;case":":S(d),w(),f=ga(),a=b(Qa.memberExpression(a,":",f)),S(d),a=pa(a);break;case"(":case"{":S(d),a=pa(a);break;default:return a}else{if(za!==Ia.type)break;S(d),a=pa(a)}return a}function pa(a){if(Da===Ia.type)switch(Ia.value){case"(":w();var c=[],d=ka();for(null!=d&&c.push(d);x(",");)d=la(),c.push(d);return y(")"),b(Qa.callExpression(a,c));case"{":R(),w();var e=ja();return b(Qa.tableCallExpression(a,e))}else if(za===Ia.type)return b(Qa.stringCallExpression(a,qa()));g("function arguments",Ia)}function qa(){var a,c=za|Ca|Ea|Fa|Ga,d=Ia.value,e=Ia.type;if(Wa&&(a=P()),e&c){S(a);var f=ua.slice(Ia.range[0],Ia.range[1]);return w(),b(Qa.literal(e,d,f))}return Aa===e&&"function"===d?(S(a),w(),va.scope&&J(),ha(null)):x("{")?(S(a),ja()):void 0}function ra(b,c){return"undefined"==typeof c&&"object"==typeof b&&(c=b,b=void 0),c||(c={}),ua=b||"",va=e(xa,c),Ha=0,Na=1,Oa=0,wa=ua.length,Ta=[[]],Ua=0,Va=[],Xa=[],va.comments&&(La=[]),va.wait?a:ta()}function sa(b){return ua+=String(b),wa=ua.length,a}function ta(a){"undefined"!=typeof a&&sa(a),wa=ua.length,Wa=va.locations||va.ranges,Ka=i();var b=T();if(va.comments&&(b.comments=La),va.scope&&(b.globals=Va),Xa.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return b}a.version="0.1.15";var ua,va,wa,xa=a.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null},ya=1,za=2,Aa=4,Ba=8,Ca=16,Da=32,Ea=64,Fa=128,Ga=256;a.tokenTypes={EOF:ya,StringLiteral:za,Keyword:Aa,Identifier:Ba,NumericLiteral:Ca,Punctuator:Da,BooleanLiteral:Ea,NilLiteral:Fa,VarargLiteral:Ga};var Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa=a.errors={unexpected:"unexpected %1 '%2' near '%3'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",invalidVar:"invalid left-hand side of assignment near '%1'"},Qa=a.ast={labelStatement:function(a){return{type:"LabelStatement",label:a}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(a){return{type:"GotoStatement",label:a}},returnStatement:function(a){return{type:"ReturnStatement",arguments:a}},ifStatement:function(a){return{type:"IfStatement",clauses:a}},ifClause:function(a,b){return{type:"IfClause",condition:a,body:b}},elseifClause:function(a,b){return{type:"ElseifClause",condition:a,body:b}},elseClause:function(a){return{type:"ElseClause",body:a}},whileStatement:function(a,b){return{type:"WhileStatement",condition:a,body:b}},doStatement:function(a){return{type:"DoStatement",body:a}},repeatStatement:function(a,b){return{type:"RepeatStatement",condition:a,body:b}},localStatement:function(a,b){return{type:"LocalStatement",variables:a,init:b}},assignmentStatement:function(a,b){return{type:"AssignmentStatement",variables:a,init:b}},callStatement:function(a){return{type:"CallStatement",expression:a}},functionStatement:function(a,b,c,d){return{type:"FunctionDeclaration",identifier:a,isLocal:c,parameters:b,body:d}},forNumericStatement:function(a,b,c,d,e){return{type:"ForNumericStatement",variable:a,start:b,end:c,step:d,body:e}},forGenericStatement:function(a,b,c){return{type:"ForGenericStatement",variables:a,iterators:b,body:c}},chunk:function(a){return{type:"Chunk",body:a}},identifier:function(a){return{type:"Identifier",name:a}},literal:function(a,b,c){return a=a===za?"StringLiteral":a===Ca?"NumericLiteral":a===Ea?"BooleanLiteral":a===Fa?"NilLiteral":"VarargLiteral",{type:a,value:b,raw:c}},tableKey:function(a,b){return{type:"TableKey",key:a,value:b}},tableKeyString:function(a,b){return{type:"TableKeyString",key:a,value:b}},tableValue:function(a){return{type:"TableValue",value:a}},tableConstructorExpression:function(a){return{type:"TableConstructorExpression",fields:a}},binaryExpression:function(a,b,c){var d="and"===a||"or"===a?"LogicalExpression":"BinaryExpression";return{type:d,operator:a,left:b,right:c}},unaryExpression:function(a,b){return{type:"UnaryExpression",operator:a,argument:b}},memberExpression:function(a,b,c){return{type:"MemberExpression",indexer:b,identifier:c,base:a}},indexExpression:function(a,b){return{type:"IndexExpression",base:a,index:b}},callExpression:function(a,b){return{type:"CallExpression",base:a,arguments:b}},tableCallExpression:function(a,b){return{type:"TableCallExpression",base:a,arguments:b}},stringCallExpression:function(a,b){return{type:"StringCallExpression",base:a,argument:b}},comment:function(a,b){return{type:"Comment",value:a,raw:b}}},Ra=Array.prototype.slice,Sa=(Object.prototype.toString,function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1});a.lex=i;var Ta,Ua,Va,Wa,Xa=[];Q.prototype.complete=function(){va.locations&&(this.loc.end.line=Ja.line,this.loc.end.column=Ja.range[1]-Ja.lineStart),va.ranges&&(this.range[1]=Ja.range[1])},a.parse=ra,a.write=sa,a.end=ta})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3]);